{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2 class="my-4">Take Membership</h2>

    {% if active_membership %}
    <div class="alert alert-info">
        <p><strong>Current Membership:</strong> {{ active_membership.membership.name }}</p>
        <p><strong>Valid until:</strong> {{ active_membership.end_date }}</p>
    </div>
    {% endif %}

    <form method="POST" action="{% url 'make_payment' %}" class="mt-4">
        {% csrf_token %}
        <div class="form-group">
            <label for="membership"><strong>Choose a Membership Plan:</strong></label>
            <select name="membership_id" id="membership" class="form-control" required>
                <option value="" disabled selected>-- Select a Membership Plan --</option>
                {% for membership in memberships %}
                <option value="{{ membership.id }}">
                    {{ membership.name }} - ${{ membership.price_per_month }} per month
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group mt-3">
            <label for="start_date"><strong>Start Date:</strong></label>
            <input type="date" name="start_date" id="start_date" class="form-control" value="{{ today_date }}" readonly>
        </div>

        <button type="submit" class="btn btn-primary mt-3">Proceed to Payment</button>
    </form>
</div>
{% endblock %}
